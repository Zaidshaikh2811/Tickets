%% System architecture diagram for TicketForge
graph LR
  subgraph ClientLayer
    B[Browser / Mobile App] -->|HTTP / REST + JWT| G[Auth Service (Express, Node.js)]
    B -->|WebSocket / Polling| ClientUI[Client App (React/Vite)]
  end

  subgraph Services
    G -->|persist| DB[(MongoDB)]
    G -->|publish events| NATS[(NATS Cluster)]
    NATS -->|delivers events| TicketSvc[Ticket Service]
    NATS -->|delivers events| BillingSvc[Billing / Payment Service]
  end

  subgraph Infra
    NATS --- K8S[Kubernetes / Docker Compose]
    DB --- K8S
    G --- K8S
  end

  subgraph Shared
    Common[common/ types & libs] --> G
    Common --> TicketSvc
  end

  note right of G: Auth responsibilities:
  - signup / signin
  - JWT issuance
  - publish user/ticket events

  style NATS fill:#f9f,stroke:#333,stroke-width:2px
  style DB fill:#efe,stroke:#333
